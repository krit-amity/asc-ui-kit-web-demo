{"version":3,"sources":["pages/Login.tsx","app/axiosBeta.ts","pages/NotiTray.tsx","app/notificationTray.ts","components/PageSwitch.tsx","App.tsx","index.tsx"],"names":["Login","onSubmit","data","className","e","preventDefault","values","Object","fromEntries","FormData","target","id","network","region","type","defaultValue","name","required","axiosBeta","axios","create","baseURL","NotiTray","useSearchParams","searchParams","get","userId","useState","state","setState","useEffect","onLanding","AmityUserTokenManager","createAuthToken","accessToken","token","defaults","headers","common","params","getNotificationHistory","res","console","log","JSON","stringify","catch","_","PageSwitch","paramsStr","toString","style","flexDirection","display","to","margin","MainApp","authToken","undefined","apiRegion","apiKey","path","element","App","rootElement","document","getElementById","createRoot","render"],"mappings":"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","file":"static/js/main.9e49a599.chunk.js","sourcesContent":["export function Login({\n  onSubmit = (data: { id: string; network: string; region: string }) => {},\n}) {\n  const handleSubmit = (e: any) => {\n    e.preventDefault();\n    const values = Object.fromEntries(new FormData(e.target));\n    onSubmit({\n      id: values.id as string,\n      network: values.network as string,\n      region: values.region as string,\n    });\n  };\n\n  return (\n    <form className=\"Login\" onSubmit={handleSubmit}>\n      <h1>\n        Welcome to\n        <strong>ASC DEMO</strong>\n      </h1>\n      <label>region</label>\n      <input type=\"text\" defaultValue={\"EU\"} name=\"region\" required />\n      <label>network</label>\n      <input type=\"text\" name=\"network\" required />\n      <label>id</label>\n      <input type=\"text\" name=\"id\" required />\n      <button type=\"submit\">Login</button>\n    </form>\n  );\n}\n","import axios from 'axios';\n\n// const BETA_URL = 'https://beta.amity.services';\nconst BETA_URL = 'https://staging.amity.services';\n\nexport const axiosBeta = axios.create({ baseURL: BETA_URL });\n\nexport const axiosBetaSetToken = (token?: string) => {\n  if (!token) return;\n  axiosBeta.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n};\n\nexport const axiosBetaRemoveAllToken = () => {\n  delete axiosBeta.defaults.headers.common['Authorization'];\n};\n","import { useEffect, useState, FC } from \"react\";\nimport {\n  AmityUserTokenManager,\n  // @ts-ignore\n} from \"@amityco/js-sdk\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { axiosBetaSetToken } from \"../app/axiosBeta\";\nimport { getNotificationHistory } from \"../app/notificationTray\";\n\nexport const NotiTray: FC = () => {\n  const [searchParams] = useSearchParams();\n  const network = searchParams.get(\"network\");\n  const userId = searchParams.get(\"userId\");\n  const region = searchParams.get(\"region\");\n  const [state, setState] = useState(\"hello\");\n  useEffect(() => {\n    const onLanding = async () => {\n      const { accessToken } = await AmityUserTokenManager.createAuthToken(\n        network,\n        region,\n        { userId }\n      );\n      if (accessToken) {\n        axiosBetaSetToken(accessToken);\n        const res = await getNotificationHistory();\n\n        console.log(JSON.stringify(res.data));\n        setState(JSON.stringify(res.data, null, \"\\t\"));\n      }\n    };\n    onLanding().catch((_) => {});\n  }, []);\n  return (\n    <div>\n      notifications\n      <div>{state}</div>\n    </div>\n  );\n};\n","import { axiosBeta } from './axiosBeta';\n\nexport type NotificationItem = {\n  description: string;\n  networkId: string;\n  userId: string;\n  verb: string;\n  targetId: string;\n  imageUrl: string;\n  customImageUrl?: string;\n  targetType: 'community' | 'post';\n  targetGroup: string;\n  lastUpdate: number;\n  hasRead: boolean;\n};\n\nexport type NotificationResponse = {\n  lastRead?: {\n    ch_uid: string;\n    lastReadDate: number;\n  };\n  data?: NotificationItem[];\n  lastRecordDate?: number;\n};\n\nexport type UpdateHadReadRequest = {\n  verb: string;\n  targetId: string;\n  targetGroup: string;\n};\n\nexport type NotificationRequest = {\n  searchAfter?: number;\n};\n\nexport const getNotificationHistory = (params?: NotificationRequest) =>\n  axiosBeta.get<NotificationResponse>('/notifications/history', { params });\n\nexport const updateNotificationRead = (data: UpdateHadReadRequest) => axiosBeta.post('/notifications/read', data);\n\nexport const updateNotificationLastRead = () => axiosBeta.post('/notifications/last-read');\n","import { Link, useSearchParams } from \"react-router-dom\";\n\nexport const PageSwitch = () => {\n  const [searchParams] = useSearchParams();\n  const paramsStr = searchParams.toString();\n  return (\n    <div style={{ flexDirection: \"row\", display: \"flex\" }}>\n      <Link to={`social?${paramsStr}`}>\n        <div style={{ margin: 12 }}>Social</div>\n      </Link>\n      <Link to={`chat?${paramsStr}`}>\n        <div style={{ margin: 12 }}>Chat</div>\n      </Link>\n      <Link to={`notitray?${paramsStr}`}>\n        <div style={{ margin: 12 }}>NotiTray</div>\n      </Link>\n    </div>\n  );\n};\n","import \"./styles.css\";\nimport { HashRouter, Route, Routes, useSearchParams } from \"react-router-dom\";\nimport {\n  AmityUiKitProvider,\n  AmityUiKitSocial,\n  AmityUiKitChat,\n  // @ts-ignore\n} from \"@amityco/ui-kit\";\n\nimport { Login } from \"./pages/Login\";\nimport { NotiTray } from \"./pages/NotiTray\";\nimport { PageSwitch } from \"./components/PageSwitch\";\n\nconst MainApp = () => {\n  const [searchParams] = useSearchParams();\n  const network = searchParams.get(\"network\");\n  const userId = searchParams.get(\"userId\");\n  const region = searchParams.get(\"region\");\n  const authToken = searchParams.get(\"authToken\") ?? undefined;\n  return (\n    <AmityUiKitProvider\n      apiRegion={region}\n      apiKey={network}\n      userId={userId}\n      authToken={authToken}\n    >\n      <PageSwitch />\n      <Routes>\n        <Route path=\"chat\" element={<AmityUiKitChat />} />\n        <Route path=\"social\" element={<AmityUiKitSocial />} />\n        <Route path=\"notitray\" element={<NotiTray />} />\n      </Routes>\n    </AmityUiKitProvider>\n  );\n};\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <HashRouter>\n        <Routes>\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/*\" element={<MainApp />} />\n        </Routes>\n      </HashRouter>\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement!);\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}